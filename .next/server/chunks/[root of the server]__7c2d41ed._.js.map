{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///Users/rolfbekkelund/Documents/Juvo%20Solutions/Repositories/UX-finall/UX-final/src/utils/screenshot.ts"],"sourcesContent":["import puppeteer from 'puppeteer-core';\nimport fs from 'fs';\nimport path from 'path';\nimport chromium from '@sparticuz/chromium-min';\n\nexport async function captureWebsiteScreenshot(url: string, outputDir: string = 'public/screenshots'): Promise<{ desktop: string; mobile: string }> {\n  const browser = await puppeteer.launch({\n    args: chromium.args,\n    executablePath: await chromium.executablePath(),\n    headless: true,\n  });\n\n  try {\n    // Ensure output directory exists\n    if (!fs.existsSync(outputDir)) {\n      fs.mkdirSync(outputDir, { recursive: true });\n    }\n\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n    const desktopFilename = `desktop-${timestamp}.png`;\n    const mobileFilename = `mobile-${timestamp}.png`;\n    \n    const desktopPath = path.join(outputDir, desktopFilename);\n    const mobilePath = path.join(outputDir, mobileFilename);\n\n    // Capture desktop screenshot\n    const desktopPage = await browser.newPage();\n    await desktopPage.setViewport({ width: 1920, height: 1080 });\n    try {\n      await desktopPage.goto(url, { waitUntil: 'networkidle2', timeout: 30000 });\n      await desktopPage.screenshot({ \n        path: desktopPath as `${string}.png`, \n        fullPage: true\n      });\n    } catch (error) {\n      console.warn('Desktop screenshot failed:', error);\n      throw error;\n    } finally {\n      await desktopPage.close();\n    }\n\n    // Capture mobile screenshot\n    const mobilePage = await browser.newPage();\n    await mobilePage.setViewport({ width: 375, height: 667 });\n    try {\n      await mobilePage.goto(url, { waitUntil: 'networkidle2', timeout: 30000 });\n      await mobilePage.screenshot({ \n        path: mobilePath as `${string}.png`, \n        fullPage: true\n      });\n    } catch (error) {\n      console.warn('Mobile screenshot failed:', error);\n      throw error;\n    } finally {\n      await mobilePage.close();\n    }\n\n    return {\n      desktop: `/screenshots/${desktopFilename}`,\n      mobile: `/screenshots/${mobileFilename}`\n    };\n  } finally {\n    await browser.close();\n  }\n}\n\nexport async function captureElementScreenshot(\n  url: string, \n  selector: string, \n  outputDir: string = 'public/screenshots'\n): Promise<string> {\n  const browser = await puppeteer.launch({\n    args: chromium.args,\n    executablePath: await chromium.executablePath(),\n    headless: true,\n  });\n\n  try {\n    if (!fs.existsSync(outputDir)) {\n      fs.mkdirSync(outputDir, { recursive: true });\n    }\n\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n    const filename = `element-${timestamp}.png`;\n    const filepath = path.join(outputDir, filename);\n\n    const page = await browser.newPage();\n    await page.setViewport({ width: 1920, height: 1080 });\n    await page.goto(url, { waitUntil: 'networkidle2', timeout: 30000 });\n    \n    // Wait for the element to be present\n    await page.waitForSelector(selector, { timeout: 10000 });\n    \n    // Take screenshot of specific element\n    const element = await page.$(selector);\n    if (element) {\n      await element.screenshot({ \n        path: filepath as `${string}.png`\n      });\n    }\n    \n    await page.close();\n    return `/screenshots/${filename}`;\n  } finally {\n    await browser.close();\n  }\n}\n\nexport async function getPageMetadata(url: string): Promise<{\n  title: string;\n  loadTime: number;\n  pageSize: number;\n  technologies: string[];\n}> {\n  const browser = await puppeteer.launch({\n    args: chromium.args,\n    executablePath: await chromium.executablePath(),\n    headless: true,\n  });\n\n  try {\n    const page = await browser.newPage();\n    \n    try {\n      // Track load time\n      const startTime = Date.now();\n      await page.goto(url, { waitUntil: 'networkidle2', timeout: 30000 });\n      const loadTime = Date.now() - startTime;\n\n      // Get page title\n      const title = await page.title();\n\n      // Get page size (approximate)\n      const pageSize = await page.evaluate(() => {\n        return new Blob([document.documentElement.outerHTML]).size / 1024; // KB\n      });\n\n      // Detect technologies\n      const technologies = await page.evaluate(() => {\n        const techs: string[] = [];\n        \n        // Check for common frameworks\n        if ((window as any).React) techs.push('React');\n        if ((window as any).Vue) techs.push('Vue.js');\n        if ((window as any).Angular) techs.push('Angular');\n        if ((window as any).jQuery) techs.push('jQuery');\n        \n        // Check for common libraries\n        if (document.querySelector('[data-reactroot]')) techs.push('React');\n        if (document.querySelector('[ng-app]')) techs.push('Angular');\n        if (document.querySelector('[v-app]')) techs.push('Vue.js');\n        \n        // Check for common CSS frameworks\n        if (document.querySelector('.bootstrap')) techs.push('Bootstrap');\n        if (document.querySelector('.tailwind')) techs.push('Tailwind CSS');\n        if (document.querySelector('.foundation')) techs.push('Foundation');\n        \n        return techs;\n      });\n\n      return {\n        title,\n        loadTime,\n        pageSize: Math.round(pageSize),\n        technologies\n      };\n    } catch (error) {\n      console.warn('Metadata capture failed:', error);\n      throw error;\n    } finally {\n      await page.close();\n    }\n  } finally {\n    await browser.close();\n  }\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":["file:///Users/rolfbekkelund/Documents/Juvo%20Solutions/Repositories/UX-finall/UX-final/src/utils/ai-analysis.ts"],"sourcesContent":["import OpenAI from 'openai';\nimport { WebsiteAnalysis, Issue } from '../types/analysis';\nimport { captureWebsiteScreenshot } from './screenshot';\nimport puppeteer from 'puppeteer-core';\nimport chromium from '@sparticuz/chromium-min';\n\n// Global issue counter for unique issue IDs\nlet issueCounter = 0;\n\n// Initialize Azure OpenAI client only if environment variables are available\nlet openai: OpenAI | null = null;\n\nif (process.env.AZURE_OPENAI_API_KEY && process.env.AZURE_OPENAI_ENDPOINT && process.env.AZURE_OPENAI_DEPLOYMENT_NAME) {\n  openai = new OpenAI({\n    apiKey: process.env.AZURE_OPENAI_API_KEY,\n    baseURL: `${process.env.AZURE_OPENAI_ENDPOINT}/openai/deployments/${process.env.AZURE_OPENAI_DEPLOYMENT_NAME}`,\n    defaultQuery: { 'api-version': process.env.AZURE_OPENAI_API_VERSION || '2024-02-15-preview' },\n    defaultHeaders: { 'api-key': process.env.AZURE_OPENAI_API_KEY },\n  });\n}\n\n// Helper function to capture website content\nasync function captureWebsiteContent(url: string): Promise<{\n  html: string;\n  visibleText: string;\n  metadata: {\n    title: string;\n    description: string;\n    keywords: string;\n    viewport: string;\n    robots: string;\n    ogTitle: string;\n    ogDescription: string;\n    ogImage: string;\n    canonical: string;\n    language: string;\n    charset: string;\n  };\n  accessibility: {\n    imagesWithoutAlt: number;\n    totalImages: number;\n    linksWithoutText: number;\n    totalLinks: number;\n    buttonsWithoutText: number;\n    totalButtons: number;\n    formsWithoutLabels: number;\n    totalForms: number;\n    headingStructure: Array<{ level: string; text: string }>;\n  };\n  performance: {\n    loadTime: number;\n    domContentLoaded: number;\n    firstPaint: number;\n    firstContentfulPaint: number;\n  };\n  viewport: {\n    width: number;\n    height: number;\n    devicePixelRatio: number;\n    scrollWidth: number;\n    scrollHeight: number;\n  };\n}> {\n  console.log('🔧 Launching Puppeteer browser with @sparticuz/chromium-min...');\n  const browser = await puppeteer.launch({\n    args: chromium.args,\n    executablePath: await chromium.executablePath(),\n    headless: true,\n  });\n  console.log('✅ Browser launched successfully');\n\n  try {\n    const page = await browser.newPage();\n    await page.setViewport({ width: 1920, height: 1080 });\n    await page.setUserAgent('Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36');\n\n    page.setDefaultTimeout(30000);\n\n    console.log(`🌐 Navigating to: ${url}`);\n    const response = await page.goto(url, {\n      waitUntil: 'networkidle0',\n      timeout: 30000\n    });\n\n    if (!response || !response.ok()) {\n      throw new Error(`Failed to load page: ${response?.status()} ${response?.statusText()}`);\n    }\n\n    console.log('✅ Page loaded successfully');\n    await new Promise(resolve => setTimeout(resolve, 2000));\n\n    // Get the full HTML\n    const html = await page.content();\n\n    // Get visible text content\n    const visibleText = await page.evaluate(() => {\n      // Remove script and style elements\n      const scripts = document.querySelectorAll('script, style, noscript, iframe, svg, img');\n      scripts.forEach(el => el.remove());\n\n      // Get all text content\n      const textContent = document.body.innerText || document.body.textContent || '';\n      \n      // Clean up the text\n      return textContent\n        .replace(/\\s+/g, ' ') // Replace multiple whitespace with single space\n        .replace(/\\n\\s*\\n/g, '\\n') // Replace multiple newlines with single newline\n        .trim();\n    });\n\n    // Get page metadata\n    const metadata = await page.evaluate(() => {\n      return {\n        title: document.title,\n        description: document.querySelector('meta[name=\"description\"]')?.getAttribute('content') || '',\n        keywords: document.querySelector('meta[name=\"keywords\"]')?.getAttribute('content') || '',\n        viewport: document.querySelector('meta[name=\"viewport\"]')?.getAttribute('content') || '',\n        robots: document.querySelector('meta[name=\"robots\"]')?.getAttribute('content') || '',\n        ogTitle: document.querySelector('meta[property=\"og:title\"]')?.getAttribute('content') || '',\n        ogDescription: document.querySelector('meta[property=\"og:description\"]')?.getAttribute('content') || '',\n        ogImage: document.querySelector('meta[property=\"og:image\"]')?.getAttribute('content') || '',\n        canonical: document.querySelector('link[rel=\"canonical\"]')?.getAttribute('href') || '',\n        language: document.documentElement.lang || 'en',\n        charset: document.characterSet || 'UTF-8'\n      };\n    });\n\n    // Get accessibility information\n    const accessibility = await page.evaluate(() => {\n      const images = document.querySelectorAll('img');\n      const links = document.querySelectorAll('a');\n      const buttons = document.querySelectorAll('button, input[type=\"button\"], input[type=\"submit\"]');\n      const forms = document.querySelectorAll('form');\n      const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');\n      const inputs = document.querySelectorAll('input, textarea, select');\n      const tables = document.querySelectorAll('table');\n      const lists = document.querySelectorAll('ul, ol');\n\n      return {\n        imagesWithoutAlt: Array.from(images).filter(img => !img.alt).length,\n        totalImages: images.length,\n        imageDetails: Array.from(images).map(img => ({\n          src: img.src,\n          alt: img.alt,\n          title: img.title,\n          hasAlt: !!img.alt\n        })),\n        linksWithoutText: Array.from(links).filter(link => !(link.textContent || '').trim()).length,\n        totalLinks: links.length,\n        linkDetails: Array.from(links).map(link => ({\n          href: link.href,\n          text: (link.textContent || '').trim(),\n          hasText: !!(link.textContent || '').trim()\n        })),\n        buttonsWithoutText: Array.from(buttons).filter(btn => !(btn.textContent || '').trim() && !btn.getAttribute('aria-label')).length,\n        totalButtons: buttons.length,\n        buttonDetails: Array.from(buttons).map(btn => ({\n          text: (btn.textContent || '').trim(),\n          ariaLabel: btn.getAttribute('aria-label'),\n          type: btn.getAttribute('type'),\n          hasText: !!(btn.textContent || '').trim() || !!btn.getAttribute('aria-label')\n        })),\n        formsWithoutLabels: Array.from(forms).filter(form => !form.querySelector('label')).length,\n        totalForms: forms.length,\n        inputDetails: Array.from(inputs).map(input => ({\n          type: input.getAttribute('type'),\n          name: input.getAttribute('name'),\n          id: input.getAttribute('id'),\n          hasLabel: !!document.querySelector(`label[for=\"${input.getAttribute('id')}\"]`) || !!input.closest('label')\n        })),\n        headingStructure: Array.from(headings).map(h => ({ level: h.tagName.toLowerCase(), text: (h.textContent || '').trim() })),\n        totalTables: tables.length,\n        totalLists: lists.length\n      };\n    });\n\n    // Get performance metrics\n    const performance = await page.evaluate(() => {\n      const perf = (performance as any);\n      const navigation = perf.getEntriesByType('navigation')[0];\n      return {\n        loadTime: navigation ? navigation.loadEventEnd - navigation.loadEventStart : 0,\n        domContentLoaded: navigation ? navigation.domContentLoadedEventEnd - navigation.domContentLoadedEventStart : 0,\n        firstPaint: perf.getEntriesByType('paint').find((entry: any) => entry.name === 'first-paint')?.startTime || 0,\n        firstContentfulPaint: perf.getEntriesByType('paint').find((entry: any) => entry.name === 'first-contentful-paint')?.startTime || 0\n      };\n    });\n\n    // Get viewport information\n    const viewport = await page.evaluate(() => {\n      return {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        devicePixelRatio: window.devicePixelRatio,\n        scrollWidth: document.documentElement.scrollWidth,\n        scrollHeight: document.documentElement.scrollHeight\n      };\n    });\n\n    return {\n      html: html.substring(0, 200000), // Increased to 200KB for full website analysis\n      visibleText: visibleText.substring(0, 50000), // Increased to 50KB for comprehensive text analysis\n      metadata,\n      accessibility,\n      performance,\n      viewport\n    };\n  } finally {\n    await browser.close();\n  }\n}\n\nexport async function analyzeWebsiteWithAI(url: string): Promise<WebsiteAnalysis> {\n  // Validate Azure OpenAI configuration\n  if (!process.env.AZURE_OPENAI_API_KEY) {\n    throw new Error('Azure OpenAI API key is not configured');\n  }\n  if (!process.env.AZURE_OPENAI_ENDPOINT) {\n    throw new Error('Azure OpenAI endpoint is not configured');\n  }\n  if (!process.env.AZURE_OPENAI_DEPLOYMENT_NAME) {\n    throw new Error('Azure OpenAI deployment name is not configured');\n  }\n  \n  console.log('🔧 Azure OpenAI configuration validated');\n  console.log('🔧 Endpoint:', process.env.AZURE_OPENAI_ENDPOINT);\n  console.log('🔧 Deployment:', process.env.AZURE_OPENAI_DEPLOYMENT_NAME);\n  \n  // Reset issue counter for this analysis\n  issueCounter = 0;\n  \n  // Capture website content and screenshots\n  let websiteContent: any = null;\n  let screenshots: { desktop?: string; mobile?: string } = { desktop: undefined, mobile: undefined };\n  \n  try {\n    console.log('📄 Capturing website content...');\n    console.log('🔧 Using puppeteer-core with @sparticuz/chromium');\n    websiteContent = await captureWebsiteContent(url);\n    console.log('✅ Website content captured successfully');\n    \n    // Also capture screenshots for the UI\n    const screenshotResult = await captureWebsiteScreenshot(url).catch((error) => {\n      console.warn('Screenshot capture failed:', error.message);\n      return { desktop: undefined, mobile: undefined };\n    });\n    screenshots = screenshotResult;\n  } catch (error) {\n    console.error('❌ Failed to capture website content:', error);\n    throw new Error(`Failed to access website: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n\n  const systemPrompt = `You are an expert UX/UI analyst and web accessibility specialist. Your task is to analyze websites and provide comprehensive, specific, and actionable feedback.\n\nIMPORTANT: Be extremely specific and detailed in your analysis, but ONLY based on the data provided. Do NOT make up specific measurements, colors, or visual details you cannot verify from the provided content.\n\nInstead of generic statements like \"Low contrast in some areas\", provide specific details like:\n- \"Missing alt text on images (found 5 images without alt attributes)\"\n- \"Navigation menu has 3 links without descriptive text\"\n- \"Contact form is missing proper labels for input fields\"\n- \"Page has poor heading structure with missing H1 and H2 elements\"\n\nFor visual issues like contrast, colors, or spacing, only mention them if you can see them explicitly in the HTML/CSS data provided. Otherwise, focus on structural, semantic, and content-based issues.\n\nAnalyze the provided website content and return a detailed analysis in the following JSON format:\n\n{\n  \"score\": number (0-100),\n  \"strengths\": [\"specific strength with details\"],\n  \"improvements\": [\"specific improvement with context\"],\n  \"recommendations\": [\"actionable recommendation with reasoning\"],\n  \"details\": {\n    \"accessibility\": {\n      \"score\": number (0-100),\n      \"issues\": [\n        {\n          \"id\": \"unique-identifier\",\n          \"title\": \"Specific issue title\",\n          \"description\": \"Detailed description of the issue with specific elements, colors, measurements, etc.\",\n          \"severity\": \"low|medium|high|critical\",\n          \"category\": \"accessibility\",\n          \"location\": {\n            \"element\": \"specific element name (e.g., 'navigation menu', 'contact form')\",\n            \"selector\": \"CSS selector if applicable\",\n            \"page\": \"page name or URL path\"\n          },\n          \"impact\": \"How this affects users (e.g., 'Screen reader users cannot understand the purpose of this image')\",\n          \"recommendation\": \"Specific actionable solution with code examples if applicable\",\n          \"codeExample\": \"Code snippet showing the fix\"\n        }\n      ]\n    },\n    \"performance\": {\n      \"score\": number (0-100),\n      \"issues\": [/* same structure as above */]\n    },\n    \"usability\": {\n      \"score\": number (0-100),\n      \"issues\": [/* same structure as above */]\n    },\n    \"design\": {\n      \"score\": number (0-100),\n      \"issues\": [/* same structure as above */]\n    }\n  },\n  \"metadata\": {\n    \"pageTitle\": \"Page title\",\n    \"loadTime\": estimated_load_time_in_ms,\n    \"pageSize\": estimated_page_size_in_kb,\n    \"technologies\": [\"detected technologies\"]\n  }\n}\n\nGuidelines for analysis:\n- Accessibility: Check alt text presence, ARIA labels, heading structure, form labels, link descriptions, semantic HTML usage\n- Performance: Evaluate based on provided metrics (load times, paint times), code structure, resource optimization opportunities\n- Usability: Assess navigation structure, content organization, form usability, mobile responsiveness indicators, user flow\n- Design: Review HTML structure for visual hierarchy, semantic markup, content organization, and layout patterns\n\nIMPORTANT: Focus on issues you can actually identify from the provided data. Do not make assumptions about visual appearance, colors, or specific measurements unless they are explicitly mentioned in the HTML/CSS content.\n\nFor each issue:\n1. Be specific about which element has the problem (based on the HTML structure provided)\n2. Provide exact counts, element types, or structural details when possible\n3. Explain the impact on users\n4. Give actionable recommendations with code examples\n5. Assign appropriate severity based on user impact\n\nRemember: Only provide feedback on issues you can actually identify from the provided data. Do not make up visual details, colors, or measurements that aren't explicitly present in the HTML/CSS content.\n\nIMPORTANT: If you cannot analyze the website for any reason (content policy, accessibility, etc.), respond with a JSON object explaining why:\n{\n  \"error\": \"reason_for_failure\",\n  \"message\": \"Detailed explanation of why analysis failed\"\n}`;\n\n  const userPrompt = `Please analyze the following website content for: ${url}\n\nWEBSITE CONTENT:\nTitle: ${websiteContent.metadata.title}\nDescription: ${websiteContent.metadata.description}\nLanguage: ${websiteContent.metadata.language}\n\nVISIBLE TEXT CONTENT (first 25000 characters):\n${websiteContent.visibleText.substring(0, 25000)}\n\nACCESSIBILITY DATA:\n- Images without alt text: ${websiteContent.accessibility.imagesWithoutAlt}/${websiteContent.accessibility.totalImages}\n- Links without text: ${websiteContent.accessibility.linksWithoutText}/${websiteContent.accessibility.totalLinks}\n- Buttons without text: ${websiteContent.accessibility.buttonsWithoutText}/${websiteContent.accessibility.totalButtons}\n- Forms without labels: ${websiteContent.accessibility.formsWithoutLabels}/${websiteContent.accessibility.totalForms}\n- Total tables: ${websiteContent.accessibility.totalTables}\n- Total lists: ${websiteContent.accessibility.totalLists}\n- Heading structure: ${websiteContent.accessibility.headingStructure.map((h: any) => `${h.level}: ${h.text.substring(0, 50)}`).join(', ')}\n\nDETAILED ACCESSIBILITY ANALYSIS:\n- Images needing alt text: ${websiteContent.accessibility.imageDetails.filter((img: any) => !img.hasAlt).map((img: any) => img.src.split('/').pop()).join(', ')}\n- Links needing text: ${websiteContent.accessibility.linkDetails.filter((link: any) => !link.hasText).map((link: any) => link.href).join(', ')}\n- Buttons needing text: ${websiteContent.accessibility.buttonDetails.filter((btn: any) => !btn.hasText).map((btn: any) => btn.type || 'button').join(', ')}\n- Inputs without labels: ${websiteContent.accessibility.inputDetails.filter((input: any) => !input.hasLabel).map((input: any) => `${input.type} (${input.name || input.id || 'unnamed'})`).join(', ')}\n\nPERFORMANCE DATA:\n- Load time: ${websiteContent.performance.loadTime}ms\n- DOM content loaded: ${websiteContent.performance.domContentLoaded}ms\n- First paint: ${websiteContent.performance.firstPaint}ms\n- First contentful paint: ${websiteContent.performance.firstContentfulPaint}ms\n\nVIEWPORT DATA:\n- Width: ${websiteContent.viewport.width}px\n- Height: ${websiteContent.viewport.height}px\n- Scroll width: ${websiteContent.viewport.scrollWidth}px\n- Scroll height: ${websiteContent.viewport.scrollHeight}px\n\nHTML STRUCTURE (first 50000 characters):\n${websiteContent.html.substring(0, 50000)}\n\nProvide a comprehensive UX analysis focusing on accessibility, performance, usability, and design. Consider both desktop and mobile experiences.\n\nIMPORTANT: Be extremely specific in your feedback. Instead of saying \"some areas have low contrast\", identify exactly which elements, what the colors are, and what the contrast ratio is.`;\n\n  try {\n    if (!openai) {\n      throw new Error('Azure OpenAI client is not initialized - missing environment variables');\n    }\n    \n    console.log('🤖 Sending request to Azure OpenAI...');\n    console.log('Model:', process.env.AZURE_OPENAI_DEPLOYMENT_NAME || 'gpt-4o');\n    console.log('URL being analyzed:', url);\n    \n    const completion = await openai.chat.completions.create({\n      model: process.env.AZURE_OPENAI_DEPLOYMENT_NAME || 'gpt-4o',\n      messages: [\n        { role: 'system', content: systemPrompt },\n        { role: 'user', content: userPrompt }\n      ],\n      temperature: 0.2,\n      max_tokens: 8000, // Increased for more detailed analysis\n    });\n\n    console.log('✅ Received response from Azure OpenAI');\n    const responseContent = completion.choices[0]?.message?.content;\n    \n    if (!responseContent) {\n      console.error('❌ No response content from AI model');\n      throw new Error('No response from AI model');\n    }\n    \n    console.log('📝 Response length:', responseContent.length);\n    console.log('📝 Response preview:', responseContent.substring(0, 200) + '...');\n\n    // Try to parse the JSON response\n    let analysisData;\n    try {\n      console.log('🔍 Attempting to parse JSON response...');\n      // Extract JSON from the response (in case there's additional text)\n      const jsonMatch = responseContent.match(/\\{[\\s\\S]*\\}/);\n      if (jsonMatch) {\n        console.log('📋 Found JSON match, parsing...');\n        analysisData = JSON.parse(jsonMatch[0]) as any;\n      } else {\n        console.log('📋 No JSON match found, trying to parse entire response...');\n        analysisData = JSON.parse(responseContent) as any;\n      }\n      console.log('✅ JSON parsing successful');\n      \n      // Check if the AI returned an error response\n      if (analysisData.error) {\n        console.error('❌ AI returned error response:', analysisData.error);\n        throw new Error(`AI cannot analyze this website: ${analysisData.message || analysisData.error}`);\n      }\n    } catch (error) {\n      console.error('❌ Failed to parse AI response:', error);\n      console.error('📝 Raw response:', responseContent);\n      \n      // Check if the AI is rejecting the request\n      if (responseContent.toLowerCase().includes('unfortunately') || \n          responseContent.toLowerCase().includes('cannot') ||\n          responseContent.toLowerCase().includes('unable') ||\n          responseContent.toLowerCase().includes('sorry')) {\n        throw new Error(`AI cannot analyze this website: ${responseContent.substring(0, 100)}...`);\n      }\n      \n      throw new Error(`Invalid AI response format: ${error instanceof Error ? error.message : 'Unknown parsing error'}`);\n    }\n\n    // Validate and structure the response\n    const analysis: WebsiteAnalysis = {\n      url,\n      score: Math.min(100, Math.max(0, analysisData.score || 70)),\n      strengths: analysisData.strengths || [],\n      improvements: analysisData.improvements || [],\n      recommendations: analysisData.recommendations || [],\n      screenshots,\n      timestamp: new Date().toISOString(),\n      details: {\n        accessibility: {\n          score: Math.min(100, Math.max(0, analysisData.details?.accessibility?.score || 70)),\n          issues: validateIssues(analysisData.details?.accessibility?.issues || [], 'accessibility')\n        },\n        performance: {\n          score: Math.min(100, Math.max(0, analysisData.details?.performance?.score || 70)),\n          issues: validateIssues(analysisData.details?.performance?.issues || [], 'performance')\n        },\n        usability: {\n          score: Math.min(100, Math.max(0, analysisData.details?.usability?.score || 70)),\n          issues: validateIssues(analysisData.details?.usability?.issues || [], 'usability')\n        },\n        design: {\n          score: Math.min(100, Math.max(0, analysisData.details?.design?.score || 70)),\n          issues: validateIssues(analysisData.details?.design?.issues || [], 'design')\n        }\n      },\n      metadata: {\n        pageTitle: analysisData.metadata?.pageTitle || websiteContent.metadata.title,\n        loadTime: analysisData.metadata?.loadTime || websiteContent.performance.loadTime,\n        pageSize: analysisData.metadata?.pageSize || Math.round(websiteContent.html.length / 1024),\n        technologies: analysisData.metadata?.technologies || []\n      }\n    };\n\n    console.log('✅ AI analysis completed successfully');\n    return analysis;\n\n  } catch (error) {\n    console.error('❌ Enhanced AI analysis failed:', error);\n    console.error('Stack trace:', {\n      message: error instanceof Error ? error.message : 'Unknown error',\n      stack: error instanceof Error ? error.stack : undefined\n    });\n    throw new Error(`AI analysis failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\nfunction validateIssues(issues: any[], category: string): Issue[] {\n  return issues.map((issue) => {\n    issueCounter++;\n    return {\n      id: issue.id || `issue-${issueCounter}`,\n      title: issue.title || 'Unspecified Issue',\n      description: issue.description || 'No description provided',\n      severity: ['low', 'medium', 'high', 'critical'].includes(issue.severity) ? issue.severity : 'medium',\n      category: category as 'accessibility' | 'performance' | 'usability' | 'design',\n      location: issue.location || {},\n      impact: issue.impact || 'Impact not specified',\n      recommendation: issue.recommendation || 'No recommendation provided',\n      codeExample: issue.codeExample || undefined\n    };\n  });\n}\n\n// Fallback function for when AI is not available\nexport function generateMockAnalysis(url: string, fallbackReason?: string): WebsiteAnalysis {\n  return {\n    url,\n    score: Math.floor(Math.random() * 40) + 60,\n    timestamp: new Date().toISOString(),\n    fallbackReason: fallbackReason || undefined,\n    strengths: [\n      \"Clean and modern design aesthetic\",\n      \"Good use of white space and typography\",\n      \"Responsive design works well on mobile devices\",\n      \"Clear navigation structure\",\n      \"Fast loading times\"\n    ],\n    improvements: [\n      \"Call-to-action buttons could be more prominent\",\n      \"Color contrast could be improved for better accessibility\",\n      \"Some pages lack clear user guidance\",\n      \"Contact information could be more accessible\",\n      \"Loading states could provide better user feedback\"\n    ],\n    recommendations: [\n      \"Implement A/B testing for key conversion elements\",\n      \"Add more interactive elements to increase engagement\",\n      \"Consider adding a chatbot for immediate user support\",\n      \"Optimize images for faster loading\",\n      \"Add breadcrumb navigation for better user orientation\"\n    ],\n    details: {\n      accessibility: {\n        score: Math.floor(Math.random() * 30) + 70,\n        issues: [\n          {\n            id: \"accessibility-contrast-1\",\n            title: \"Low contrast text in navigation menu\",\n            description: \"White text (#FFFFFF) on light gray background (#F0F0F0) has insufficient contrast ratio of 2.1:1\",\n            severity: \"high\",\n            category: \"accessibility\",\n            location: { element: \"navigation menu\", page: \"homepage\" },\n            impact: \"Users with visual impairments cannot read the navigation text\",\n            recommendation: \"Change background color to darker gray (#666666) for 4.5:1 contrast ratio\"\n          },\n          {\n            id: \"accessibility-alt-1\",\n            title: \"Missing alt text on hero image\",\n            description: \"Hero banner image 'hero-banner.jpg' lacks descriptive alt text\",\n            severity: \"medium\",\n            category: \"accessibility\",\n            location: { element: \"hero image\", page: \"homepage\" },\n            impact: \"Screen reader users cannot understand the image content\",\n            recommendation: \"Add descriptive alt text: 'alt=\\\"Company team working together in modern office\\\"'\"\n          }\n        ]\n      },\n      performance: {\n        score: Math.floor(Math.random() * 25) + 75,\n        issues: [\n          {\n            id: \"performance-images-1\",\n            title: \"Large unoptimized hero image\",\n            description: \"Hero image 'hero-banner.jpg' is 2.3MB and not optimized for web\",\n            severity: \"medium\",\n            category: \"performance\",\n            location: { element: \"hero image\", page: \"homepage\" },\n            impact: \"Slow page load times, especially on mobile devices\",\n            recommendation: \"Compress image to under 200KB and use WebP format\"\n          },\n          {\n            id: \"performance-css-1\",\n            title: \"Unoptimized CSS delivery\",\n            description: \"CSS is loaded synchronously and blocks rendering\",\n            severity: \"low\",\n            category: \"performance\",\n            location: { element: \"stylesheet\", page: \"all\" },\n            impact: \"Delays visual rendering of the page\",\n            recommendation: \"Use critical CSS inlining and async loading for non-critical styles\"\n          }\n        ]\n      },\n      usability: {\n        score: Math.floor(Math.random() * 35) + 65,\n        issues: [\n          {\n            id: \"usability-nav-1\",\n            title: \"Complex navigation structure\",\n            description: \"Navigation has 3 levels deep with unclear hierarchy\",\n            severity: \"medium\",\n            category: \"usability\",\n            location: { element: \"main navigation\", page: \"all\" },\n            impact: \"Users struggle to find desired content quickly\",\n            recommendation: \"Simplify to 2 levels maximum and add breadcrumbs\"\n          },\n          {\n            id: \"usability-flow-1\",\n            title: \"Unclear user flow on homepage\",\n            description: \"No clear call-to-action or next steps for visitors\",\n            severity: \"high\",\n            category: \"usability\",\n            location: { element: \"homepage content\", page: \"homepage\" },\n            impact: \"High bounce rate as users don't know what to do next\",\n            recommendation: \"Add prominent CTA button and clear value proposition\"\n          }\n        ]\n      },\n      design: {\n        score: Math.floor(Math.random() * 20) + 80,\n        issues: [\n          {\n            id: \"design-spacing-1\",\n            title: \"Inconsistent spacing between sections\",\n            description: \"Sections have varying margins (20px, 40px, 30px) instead of consistent spacing\",\n            severity: \"low\",\n            category: \"design\",\n            location: { element: \"page sections\", page: \"all\" },\n            impact: \"Visual inconsistency creates poor user experience\",\n            recommendation: \"Use consistent 32px spacing between all sections\"\n          },\n          {\n            id: \"design-mobile-1\",\n            title: \"Poor mobile layout for contact form\",\n            description: \"Contact form fields are too small (height: 32px) on mobile devices\",\n            severity: \"medium\",\n            category: \"design\",\n            location: { element: \"contact form\", page: \"contact\" },\n            impact: \"Difficult to tap and interact with form elements\",\n            recommendation: \"Increase form field height to 44px minimum for mobile\"\n          }\n        ]\n      }\n    },\n    metadata: {\n      pageTitle: \"Sample Website\",\n      loadTime: 2500,\n      pageSize: 1200,\n      technologies: [\"React\", \"Next.js\", \"Tailwind CSS\"]\n    }\n  };\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1025, "column": 0}, "map": {"version":3,"sources":["file:///Users/rolfbekkelund/Documents/Juvo%20Solutions/Repositories/UX-finall/UX-final/src/app/api/analyze-website/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { analyzeWebsiteWithAI, generateMockAnalysis } from '../../../utils/ai-analysis';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { url } = await request.json();\n\n    if (!url) {\n      return NextResponse.json(\n        { error: 'URL is required' },\n        { status: 400 }\n      );\n    }\n\n    // Validate URL format\n    const urlPattern = /^https?:\\/\\/.+/;\n    if (!urlPattern.test(url)) {\n      return NextResponse.json(\n        { error: 'Invalid URL format. Please provide a URL starting with http:// or https://' },\n        { status: 400 }\n      );\n    }\n\n    let analysis;\n\n    // Check if Azure OpenAI is configured\n    if (process.env.AZURE_OPENAI_API_KEY && process.env.AZURE_OPENAI_ENDPOINT && process.env.AZURE_OPENAI_DEPLOYMENT_NAME) {\n      try {\n        console.log('🔍 Using enhanced AI analysis...');\n        analysis = await analyzeWebsiteWithAI(url);\n      } catch (aiError) {\n        console.error('❌ Enhanced AI analysis failed:', aiError);\n        \n        // Check if it's a content policy violation or technical failure\n        const errorMessage = aiError instanceof Error ? aiError.message : 'Unknown error';\n        \n        if (errorMessage.includes('AI cannot analyze this website') || \n            errorMessage.includes('content policy') ||\n            errorMessage.includes('cannot process')) {\n          // Content policy violation - return 422\n          return NextResponse.json(\n            { \n              error: 'AI analysis failed',\n              message: 'Unable to analyze this website. This could be due to the website being inaccessible, requiring authentication, or having content that the AI cannot process.',\n              url: url,\n              timestamp: new Date().toISOString()\n            },\n            { status: 422 }\n          );\n        } else {\n          // Technical failure - fall back to basic analysis\n          console.log('⚠️ AI failed for technical reasons, falling back to basic analysis...');\n          analysis = generateMockAnalysis(url, 'AI failed for technical reasons, here is a basic analysis for demonstration purposes.');\n        }\n      }\n    } else {\n      console.log('⚠️ Azure OpenAI not configured, using basic analysis...');\n      analysis = generateMockAnalysis(url);\n    }\n\n    return NextResponse.json(analysis);\n  } catch (error) {\n    console.error('❌ Error analyzing website:', error);\n    return NextResponse.json(\n      { error: 'Failed to analyze website' },\n      { status: 500 }\n    );\n  }\n} "],"names":[],"mappings":";;;AAAA;AACA;;;;;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,QAAQ,IAAI;QAElC,IAAI,CAAC,KAAK;YACR,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAkB,GAC3B;gBAAE,QAAQ;YAAI;QAElB;QAEA,sBAAsB;QACtB,MAAM,aAAa;QACnB,IAAI,CAAC,WAAW,IAAI,CAAC,MAAM;YACzB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA6E,GACtF;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI;QAEJ,sCAAsC;QACtC,IAAI,QAAQ,GAAG,CAAC,oBAAoB,IAAI,QAAQ,GAAG,CAAC,qBAAqB,IAAI,QAAQ,GAAG,CAAC,4BAA4B,EAAE;YACrH,IAAI;gBACF,QAAQ,GAAG,CAAC;gBACZ,WAAW,MAAM,CAAA,GAAA,gIAAA,CAAA,uBAAoB,AAAD,EAAE;YACxC,EAAE,OAAO,SAAS;gBAChB,QAAQ,KAAK,CAAC,kCAAkC;gBAEhD,gEAAgE;gBAChE,MAAM,eAAe,mBAAmB,QAAQ,QAAQ,OAAO,GAAG;gBAElE,IAAI,aAAa,QAAQ,CAAC,qCACtB,aAAa,QAAQ,CAAC,qBACtB,aAAa,QAAQ,CAAC,mBAAmB;oBAC3C,wCAAwC;oBACxC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;wBACE,OAAO;wBACP,SAAS;wBACT,KAAK;wBACL,WAAW,IAAI,OAAO,WAAW;oBACnC,GACA;wBAAE,QAAQ;oBAAI;gBAElB,OAAO;oBACL,kDAAkD;oBAClD,QAAQ,GAAG,CAAC;oBACZ,WAAW,CAAA,GAAA,gIAAA,CAAA,uBAAoB,AAAD,EAAE,KAAK;gBACvC;YACF;QACF,OAAO;YACL,QAAQ,GAAG,CAAC;YACZ,WAAW,CAAA,GAAA,gIAAA,CAAA,uBAAoB,AAAD,EAAE;QAClC;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA4B,GACrC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}